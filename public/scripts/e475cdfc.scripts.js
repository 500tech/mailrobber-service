(function(){"use strict";this.app=angular.module("mailRobber",["classy","ngCookies","ngResource","restangular","ngSanitize","ngRoute"]).config(["RestangularProvider",function(a){return a.setBaseUrl("http://www.mailrobber.com/api")}]).config(["$routeProvider","$locationProvider",function(a){return a.when("/",{templateUrl:"views/main.html"}).when("/about",{templateUrl:"views/about.html"}).when("/terms",{templateUrl:"views/terms.html"}).when("/feedback",{templateUrl:"views/feedback.html",controller:"FeedbackCtrl"}).when("/:token",{templateUrl:"views/app.html",controller:"AppsCtrl"}).when("/:token/:email_id",{templateUrl:"views/email/text.html",controller:"EmailsCtrl"}).when("/:token/:email_id/html",{templateUrl:"views/email/html.html",controller:"EmailsCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){app.classy.controller({name:"AppsCtrl",inject:["$scope","$routeParams","$cookieStore","$window","App","Email"],init:function(){return this.$.app={data:this.App.show(this.$routeParams.token),emails:this.Email.index(this.$routeParams.token)},this.$.currentTime=this.$window.Date(),this.$.lastTimeEntered=this.$cookieStore.get("lastTimeEntered")||this.$.currentTime,this.$cookieStore.put("lastTimeEntered",this.$.currentTime)},toDate:function(a){var b;return b=new Date(a),b.toString()}})}.call(this),function(){app.classy.controller({name:"EmailsCtrl",inject:["$scope","$sce","$location","$routeParams","App","Email"],init:function(){return this.$.app={data:this.App.show(this.$routeParams.token),email:this.Email.show(this.$routeParams.token,this.$routeParams.email_id)}},deleteEmail:function(){var a=this;return this.Email["delete"](this.$routeParams.token,this.$routeParams.email_id).then(function(){return a.$location.path(a.$.app.data.token)})},unescapedHtml:function(a){return this.$sce.trustAsHtml(a)}})}.call(this),function(){app.classy.controller({name:"FeedbackCtrl",inject:["$scope","Feedback"],init:function(){return this.$.feedback={}},sendFeedback:function(){var a=this;return this.$.feedback.message?this.Feedback.create(this.$.feedback).then(function(){return a.$.feedback={sent:!0,blank:!1,error:!1}},function(){return a.$.feedback={email:a.$.feedback.email,message:a.$.feedback.message,sent:!1,blank:!1,error:!0}}):this.$.feedback={sent:!1,blank:!0,error:!1}}})}.call(this),function(){var a;a=function(){function a(a){this.Restangular=a,this.emails=a.all("emails")}return a.prototype.index=function(a){return this.emails.customGETLIST(a).$object},a.prototype.show=function(a,b){return this.emails.customGET(a+"/"+b).$object},a.prototype["delete"]=function(a,b){return this.emails.customPOST({token:a,email_id:b},"destroy")},a}(),app.service("Email",["Restangular",a])}.call(this),function(){var a;a=function(){function a(a){this.Restangular=a,this.apps=a.all("apps")}return a.prototype.show=function(a){return this.apps.customGET(a).$object},a}(),app.service("App",["Restangular",a])}.call(this),function(){var a;a=function(){function a(a){this.Restangular=a,this.feedbacks=a.all("feedbacks")}return a.prototype.create=function(a){return this.feedbacks.customPOST(a,"create")},a}(),app.service("Feedback",["Restangular",a])}.call(this),function(){app.filter("filename",function(){return function(a){return a.substring(a.lastIndexOf("/")+1)}})}.call(this);